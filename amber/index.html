<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AMBER</title>
  <link rel="icon" href="./images/amberSpider.ico" type="image/x-icon">
  <style>
    html { font-size: 10px; }
    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      line-height: 1.6; color:#222; background:#fff;
    }
    .page{ display:grid; grid-template-rows:auto auto 1fr auto; min-height:100vh; }

    /* ===== 轮播 ===== */
    header.slider{ justify-self:center; width:100%; }
    .slider{ width:100%; aspect-ratio:9.6/1; overflow:hidden; position:relative; }
    .slider-wrapper{ width:100%; height:100%; position:relative; }
    .slider-wrapper img{ width:100%; height:100%; object-fit:cover; display:block; }
    .slider-footer{ position:absolute; inset:auto 0 0 0; height:40px; background:rgba(36,31,33,.6); color:#fff; padding:2px 12px 0; display:flex; flex-direction:column; justify-content:space-between; }
    .slider-footer p{ font-size:15px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .slider-indicator{ list-style:none; display:flex; gap:6px; }
    .slider-indicator li{ width:6px; height:6px; border-radius:50%; background:#fff; opacity:.4; cursor:pointer; }
    .slider-indicator li.active{ opacity:1; transform:scale(1.05); }
    .toggle{ position:absolute; right:8px; top:5px; display:flex; gap:12px; }
    .toggle button{ width:30px; height:30px; border:none; border-radius:4px; background:rgba(255,255,255,.12); color:#fff; cursor:pointer; }
    .toggle button:hover{ background:rgba(255,255,255,.22); }

    /* ===== 顶部导航 ===== */
    nav.navbar{ position:sticky; top:0; z-index:100; background:#CD853F; box-shadow:0 2px 6px rgba(0,0,0,.06); padding:0 24px; }
    .navbar ul{ display:grid; grid-auto-flow:column; gap:12rem; height:6rem; align-items:center; list-style:none; justify-content:center; overflow:auto hidden; }
    .navbar a{ color:#fff; text-decoration:none; font-size:16px; font-weight:600; padding:4px 0; transition:color .2s; }
    .navbar a:hover{ color:#FFD700; }
    .navbar a.active{ color:#FFD700; position:relative; }
    .navbar a.active::after{ content:''; position:absolute; left:0; bottom:-4px; width:100%; height:2px; background:#FFD700; border-radius:1px; }

    /* ===== 手机菜单 ===== */
    .mobile-menu{ display:none; padding:12px; background:#CD853F; }
    .mobile-menu select{ width:100%; font-size:16px; padding:8px; border-radius:4px; border:none; }

    /* ===== 主体 ===== */
    main.content-container{
      display:grid; grid-template-columns:1fr; gap:24px; padding:32px; max-width:1200px; width:100%; margin-inline:auto;
    }
    .content-section{
      display:none; grid-template-columns:1fr; gap:24px; align-content:start; opacity:0; pointer-events:none; transition:opacity .3s ease;
    }
    .content-section.show{ display:grid; }
    .content-section.fade-in{ opacity:1; pointer-events:auto; }
    .content-section.fade-out{ opacity:0; pointer-events:none; }

    .card{ background:#D7FFD7; border-radius:8px; padding:24px; display:grid; gap:12px; }
    .card h3{ font-size:20px; }
    .card p{ font-size:1.6rem; color:#555; }

    /* ===== GUI 使用手册样式 ===== */
    .manual{
      display:grid; grid-template-columns: 280px 1fr; gap:24px;
    }
    .manual .toc{
      position:sticky; top:80px; align-self:start; background:#fff; border:1px solid #eee; border-radius:8px; padding:16px; max-height: calc(100vh - 120px); overflow:auto;
    }
    .manual .toc h4{ font-size:14px; color:#666; margin-bottom:8px; }
    .manual .toc a{ display:block; font-size:14px; color:#333; text-decoration:none; padding:4px 6px; border-radius:4px; }
    .manual .toc a:hover{ background:#f6f6f6; }
    .manual .toc a.active{ color:#0a7f2e; background:#e7f7ec; font-weight:600; }
    .manual .toc .toc-l2{ padding-left:12px; }
    .manual .toc .toc-l3{ padding-left:24px; }

    .manual .manual-body{
      background:#fff; border:1px solid #eee; border-radius:8px; padding:24px;
    }
    .manual .manual-body h1{ font-size:2.4rem; margin-bottom:8px; }
    .manual .manual-body .meta{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:16px; color:#666; font-size:1.3rem; }
    .badge{
      display:inline-flex; align-items:center; gap:6px; font-size:12px; padding:4px 8px; border-radius:999px; background:#f0f0f0; color:#333;
    }
    .badge.success{ background:#e7f7ec; color:#0a7f2e; }
    .badge.info{ background:#e7f0ff; color:#1f4ed8; }

    .manual .manual-body h2{ font-size:2rem; margin:24px 0 12px; }
    .manual .manual-body h3{ font-size:1.8rem; margin:18px 0 8px; }
    .manual .manual-body p, .manual .manual-body li{ font-size:1.5rem; color:#333; }
    .manual .manual-body ul, .manual .manual-body ol{ padding-left:16px; margin:8px 0 12px; }
    .callout{ border-left:4px solid #999; background:#f8f8f8; padding:12px 14px; border-radius:6px; margin:12px 0; }
    .callout.tip{ border-left-color:#0a7f2e; background:#e7f7ec; }
    .callout.warn{ border-left-color:#a15d00; background:#fff7e6; }
    .callout.info{ border-left-color:#1f4ed8; background:#e7f0ff; }

    /* 步骤卡片 */
    .steps{ display:grid; gap:14px; }
    .step{
      border:1px solid #e8e8e8; border-radius:10px; padding:14px 16px; background:#fafafa;
      display:grid; gap:8px;
    }
    .step-header{ display:flex; align-items:center; gap:10px; }
    .step-num{
      width:2.5rem; height:2.5rem; border-radius:50%; background:#0a7f2e; color:#fff; display:inline-flex; align-items:center; justify-content:center; font-weight:700; font-size:1.5rem;
      flex:0 0 auto;
    }
    .step-title{ font-weight:700; font-size: 1.5rem;}
    .step-body img{ border:1px solid #eee; border-radius:8px; max-width:100%; height:auto; cursor:zoom-in; }
    .step-actions{ display:flex; gap:8px; flex-wrap:wrap; }
    .btn{
      border:1px solid #ddd; background:#fff; color:#333; padding:6px 10px; border-radius:6px; cursor:pointer; font-size:12px;
    }
    .btn:hover{ background:#f6f6f6; }

    /* 图注 */
    figure{ margin:0; }
    figcaption{ font-size:12px; color:#666; margin-top:6px; }

    /* 两栏说明表 */
    .kv{
      width:100%; border-collapse:collapse; font-size:14px; margin-top:8px;
    }
    .kv th, .kv td{ border:1px solid #eee; padding:8px 10px; vertical-align:top; }
    .kv th{ width:200px; background:#fafafa; text-align:left; }

    /* 快捷键表 */
    .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background:#f1f1f1; border:1px solid #e2e2e2; border-bottom-width:2px; padding:2px 6px; border-radius:6px; font-size:12px; }

    /* FAQ 折叠 */
    .accordion{ border:1px solid #eee; border-radius:8px; overflow:hidden; }
    .ac-item + .ac-item{ border-top:1px solid #eee; }
    .ac-head{ width:100%; text-align:left; background:#fafafa; border:none; padding:12px 14px; font-weight:600; cursor:pointer; }
    .ac-body{ display:none; padding:12px 14px; background:#fff; }
    .ac-item.open .ac-body{ display:block; }

    /* 灯箱 */
    .lightbox{ position:fixed; inset:0; background: rgba(0,0,0,.75); display:none; align-items:center; justify-content:center; z-index:9999; }
    .lightbox.open{ display:flex; }
    .lightbox img{ max-width: min(96vw, 1400px); max-height: 92vh; border-radius:8px; box-shadow:0 10px 30px rgba(0,0,0,.5); }
    .lightbox .close{ position:fixed; top:18px; right:22px; color:#fff; font-size:28px; cursor:pointer; }

    /* 打印：仅打印手册正文 */
    @media print{
      header.slider, nav.navbar, .mobile-menu, footer.site-footer, #homeContainer, #publicationContainer, #downloadContainer, #exampleContainer, #datasetContainer, #teamContainer, #piContainer, #contactContainer { display:none !important; }
      #howtouseContainer{ display:block !important; opacity:1 !important; }
      .manual{ grid-template-columns: 1fr; }
      .manual .toc{ display:none; }
      body{ background:#fff; }
    }

    /* 响应式 */
    @media (max-width: 1024px){
      .manual{ grid-template-columns: 1fr; }
      .manual .toc{ position:relative; top:auto; max-height:none; }
    }
    @media (max-width: 768px){
      .navbar{ display:none; }
      .mobile-menu{ display:block; }
      main.content-container{ padding:16px; }
      .manual .manual-body{ padding:16px; }
    }

    @media (prefers-reduced-motion: reduce){
      * { animation:none !important; transition:none !important; }
    }


    /* === 全局滚动条样式（Chromium/Edge/Safari） === */
    ::-webkit-scrollbar {
      width: 1.2rem;            /* 右侧滚动条宽度 */
      height: 1.2rem;           /* 底部滚动条高度（如出现） */
    }
    ::-webkit-scrollbar-track {
      background: transparent; /* 轨道透明更干净 */
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(205, 133, 63, 0.5);   /* CD853F 半透明 */
      border: 0.1rem solid transparent;         /* 造“内边距”空隙 */
      border-radius: 0.6rem;
      background-clip: content-box;   
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgba(205, 133, 63, 1);
      border: 0.1rem solid transparent;
      background-clip: content-box;
    }



    /* （可选）仅在手册区域自定义，而不是全局：把上面选择器改成这样 */
    /* .manual .manual-body, .manual .toc { scrollbar-width: thin; }
    .manual .manual-body::-webkit-scrollbar,
    .manual .toc::-webkit-scrollbar { width: 12px; }
    .manual .manual-body::-webkit-scrollbar-thumb,
    .manual .toc::-webkit-scrollbar-thumb { background: rgba(205,133,63,.5); border-radius: 8px; } */


    /* （可选）暗色模式适配 */
    /* @media (prefers-color-scheme: dark) {
      ::-webkit-scrollbar-thumb { background: rgba(205,133,63,.7); }
      * { scrollbar-color: rgba(205,133,63,.9) transparent; }
      
    } */


    /* 平滑滚动（目录/锚点更顺滑） */
    html { scroll-behavior: smooth; }

    /* 避开吸顶导航：目录跳转时标题不被顶住 */
    .manual .manual-body h2,
    .manual .manual-body h3 {
      scroll-margin-top: 7rem; /* 6rem 导航 + 1rem 一点间距 */
    }

    /* 统一：手册正文与步骤里的图片，默认不再铺满整行 */
    .manual .manual-body figure { 
      display:flex; flex-direction:column; align-items:center; 
    }
    .manual .manual-body figure img,
    .manual .manual-body .step-body img {
      width: auto;                         /* 关键：不要强行 100% */
      max-width: min(100%, 900px);         /* 默认上限 900px，且不超过容器 */
      max-height: 70vh;                    /* 竖屏截图也不会太高 */
      object-fit: contain;                 /* 等比缩放不变形 */
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 4px 14px rgba(0,0,0,.06);
    }

    /* 移动端仍然允许全宽展示（屏幕窄，小图全宽没问题） */
    @media (max-width: 768px){
      .manual .manual-body figure img,
      .manual .manual-body .step-body img {
        max-width: 100%;
        max-height: 62vh;
      }
    }

    /* 常用尺寸工具类：按需加到 <img> 上精细控制 */
    .img-sm   { max-width: 520px !important; }
    .img-md   { max-width: 720px !important; }
    .img-lg   { max-width: 960px !important; }
    .img-full { max-width: 100% !important; width: 100% !important; } /* 真全宽 */

    /* 多图并排（可选）：把多张图放到同一个 .figure-row 容器里 */
    .figure-row{
      display:grid; gap:12px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      align-items:start;
    }
    .figure-row img{ width:100%; height:auto; max-height: 50vh; object-fit: contain; }

    p {
      margin-block: 1rem 0.5rem;          /* 相当于 上、下 */
      /* 单独控制时： */
      /* margin-block-start: 0.5rem; */   /* 段前 */
      /* margin-block-end: 1rem; */       /* 段后 */
    }

  </style>
</head>
<body>
  <div class="page">

    <!-- ===== 轮播 ===== -->
    <header class="slider" role="region" aria-label="Hero carousel">
      <div class="slider-wrapper">
        <img src="./images/header/a01.png" alt="Slide: Phylogenetic Analysis" />
        <div class="slider-footer" id="sliderFooter" aria-live="polite">
          <p id="sliderTitle">Phylogenetic Analysis</p>
          <ul class="slider-indicator" role="tablist" aria-label="Carousel indicators">
            <li class="active" role="tab" aria-selected="true" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
          </ul>
          <div class="toggle">
            <button class="prev" aria-label="Previous slide" title="Previous">&lt;</button>
            <button class="next" aria-label="Next slide" title="Next">&gt;</button>
          </div>
        </div>
      </div>
    </header>

    <!-- ===== 顶部导航 ===== -->
    <nav class="navbar" aria-label="Primary">
      <ul>
        <li><a href="#homeContainer">HOME</a></li>
        <li><a href="#downloadContainer">DOWNLOAD</a></li>
        <li><a href="#howtouseContainer">HOW TO USE</a></li>
        <li><a href="#exampleContainer">EXAMPLE</a></li>
        <li><a href="#datasetContainer">DATASET</a></li>
        <li><a href="#publicationContainer">PUBLICATION</a></li>
        <li><a href="#contactContainer">CONTACT</a></li>
      </ul>
    </nav>

    <!-- 手机菜单 -->
    <div class="mobile-menu">
      <select id="mobileNav">
        <option value="">MENU</option>
        <option value="#homeContainer">HOME</option>
        <option value="#downloadContainer">DOWNLOAD</option>
        <option value="#howtouseContainer">HOW TO USE</option>
        <option value="#exampleContainer">EXAMPLE</option>
        <option value="#datasetContainer">DATASET</option>
        <option value="#publicationContainer">PUBLICATION</option>
        <option value="#contactContainer">CONTACT</option>
      </select>
    </div>

    <!-- ===== 主体 ===== -->
    <main class="content-container">

      <!-- 其他栏目（可按需编辑） -->
      <section id="homeContainer" class="content-section show fade-in">
        <div class="card"><h3>AMBER: An Advanced Molecular Biology Evolution Research Software</h3><p></p></div>
        <div class="card"><h3>With Purpose Unchanged, Our Dreams Set Sail</h3><p></p></div>
      </section>

      <!-- ===== GUI Table of Contents ===== -->
      <section id="howtouseContainer" class="content-section">
        <div class="manual">
          <!-- 目录（自动生成） -->
          <aside class="toc" aria-label="Manual Table of Contents">
            <h4>Table of Contents</h4>
            <nav id="manualToc"></nav>
          </aside>

          <!-- 正文 -->
          <article class="manual-body" id="manualBody">
            <header>
              <h1>AMBER Usage</h1>
              <div class="meta">
                <span class="badge info">Version: 0.5.5+</span>
                <span class="badge">Last updated: 2025-09-21</span>
                <span class="badge success">GUI</span>
              </div>
              <div class="callout tip">Feature overview and usage instructions for AMBER-related components</div>
            </header>

            <!-- 1. Introduction -->
            <section>
              <h2>1. Introduction</h2>
              <p>Key analysis features include: Phylogenetic Analysis, Evolutionary Analysis, Gene Set Enrichment Analysis (GSEA). The Toolbox also includes DIAMOND. </p>
              <figure>
                <img src="./images/howtouse/introduction.png" alt="introduction" data-lightbox>
                <figcaption>Figure: Introduction.</figcaption>
              </figure>
              <table class="kv">
                <tr><th>Phylogenetic Analysis</th><td>The Phylogenetic Analysis module includes data collection, sequence alignment, low-quality sequence trimming, model selection, partitioning scheme setup, phylogenetic reconstruction, statistical analysis, as well as sequence and tree visualization.</td></tr>
                <tr><th>Evolutionary Analysis</th><td>The Evolutionary Analysis module includes molecular evolutionary analysis, population genetics analyses, community ecology diversity analyses, and related visualizations.</td></tr>
                <tr><th>Gene Set Enrichment Analysis</th><td>The GSEA module includes a range of functionalities, such as GO and KEGG pathway enrichment, pre-ranked GSEA, single-sample GSEA, and Gene Set Variation Analysis (GSVA).</td></tr>
                <tr><th>Toolbox</th><td>DIAMOND </td></tr>
              </table>
            </section>

            <!-- 2. 快速开始（步骤卡片） -->
            <section>
              <h2>2. Phylogenetic Analysis</h2>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <!-- <span class="step-num">1</span> -->
                    <span class="step-title">The main process of phylogenetic analysis</span>
                  </div>
                  <div class="step-body">
                    <p>Phylogenetic analysis involves multiple steps. 
                      First, sequence data (such as gene sequences, protein sequences, or genome sequences) must be collected and organized. 
                      Next, a Multiple Sequence Alignment (MSA) is performed. Once the alignment is accurate, low-quality regions are identified and processed. 
                      The sequences are then concatenated for further analysis. 
                      After that, an appropriate evolutionary model is selected, and data partitioning is optimized to improve the reliability of tree construction. 
                      Then, a phylogenetic tree is built using methods such as Maximum Likelihood, Bayesian Inference, or the Neighbor-Joining method. 
                      Finally, the phylogenetic tree is visualized to clearly display the evolutionary relationships.</p>
                    <p>Operation process in AMBER: <span class="kbd">Collection</span><strong> → </strong><span class="kbd">Alignment</span><strong> → </strong><span class="kbd">Trimming</span><strong> → </strong><span class="kbd">Integrate</span><strong> → </strong><span class="kbd">Model</span><strong> → </strong><span class="kbd">reconstruct</span></p>
                    <figure>
                      <img src="./images/howtouse/Phylogenetic_Analysis.png" alt="Phylogenetic_Analysis" data-lightbox>
                      <figcaption>Figure: Operation process in AMBER。</figcaption>
                    </figure>
                  </div>
                </div>
              </div>
              <h3>2.1 Collection</h3>
              <p>The imported data can be broadly categorized into two types: single-gene or multi-gene data, and genome-scale data. Single-gene and multi-gene datasets are typically generated through Sanger sequencing and correspond to specific, targeted DNA sequences. In contrast, genome-scale data are derived from whole-genome sequencing followed by assembly and annotation.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">Collection of single-gene and multi-gene data</span>
                  </div>
                  <div class="step-body">
                    <p><strong>AMBER</strong> supports direct import of raw sequencing files (.ab1) for both single-gene and multi-gene datasets, encompassing single or multiple DNA fragments. Based on predefined quality parameters, raw data can be automatically processed to generate high-confidence sequences, significantly reducing manual effort and improving both accuracy and consistency. Additionally, sequences in FASTA format can be imported. Data from online sources can be integrated via structured table files, and all acquired data are automatically merged into a unified dataset.</p>
                    <figure>
                      <img src="./images/howtouse/collection_01.png" alt="Collection of single-gene and multi-gene data" data-lightbox>
                      <figcaption>Figure: Collection of single-gene and multi-gene data</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(1) Import through Form</strong></p>
                    <p>Prepare a table where the first row contains column headers.
                    Do not change the names of the first and second columns.
                    Starting from the third column, use gene names as headers and fill in the corresponding NCBI accession numbers.
                    AMBER will automatically retrieve and integrate the data.
                    </p>
                    <figure>
                      <img src="./images/howtouse/collection_01_form.png" alt="Form Data" data-lightbox>
                      <figcaption>Figure: Accession Numbers in the Form</figcaption>
                    </figure>
                    <p>The downloaded files are in GenBank format and are stored in the download_data folder.
                    If the data has already been downloaded, it will not be downloaded again upon re-import.
                    Frequently used files can be saved in the local_database folder.
                    If the required data is present in the local_database, AMBER will directly import it without initiating a new download.</p>
                    <div class="callout info">This functionality offers flexibility and efficiency by allowing users to manually download and store files, or import them from external sources.
                    By utilizing previously saved files, the system avoids redundant downloads, thereby improving workflow efficiency and reducing time consumption.</div>
                    <figure>
                      <img src="./images/howtouse/collection_01_download.png" alt="Sava Dat" data-lightbox>
                      <figcaption>Figure: Sava Data</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(2) Import from Folder</strong></p>
                    <p>For data preparation, all FASTA files corresponding to the same gene should be stored within a single folder named after that gene.
                    If a FASTA file contains only one sequence, the file name should be the same as the sequence name.
                    For FASTA files containing multiple sequences, the names of individual sequences should be taken directly from the headers (i.e., the text following the “>” symbol).
                    This structure ensures correct file integration during downstream analysis.</p>
                    <figure>
                      <img src="./images/howtouse/collection_01_datasets_form.png" alt="Import from Folder" data-lightbox>
                      <figcaption>Figure: Import from the Folder</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(3) Datasets presentation</strong></p>
                    <p>Sequence Data Statistics Imported from the Table</p>
                    <figure>
                      <img src="./images/howtouse/collection_01_datasets_form.png" alt="Presentation of datasets from the form" data-lightbox>
                      <figcaption>Figure: Presentation of datasets from the form</figcaption>
                    </figure>
                    <p>Statistical Summary of Sequences Imported from Folders</p>
                    <figure>
                      <img src="./images/howtouse/collection_01_datasets_folder.png" alt="Presentation of datasets from the folder" data-lightbox>
                      <figcaption>Figure: Presentation of datasets from the folder</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(4) Sequences presentation</strong></p>
                    <p>Sequence Data Visualization</p>
                    <figure>
                      <img src="./images/howtouse/collection_01_sequences.png" alt="sequences presentation" data-lightbox>
                      <figcaption>Figure: Sequences presentation</figcaption>
                    </figure>
                  </div>
                </div>
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">Collection of genomic data</span>
                  </div>
                  <div class="step-body">
                    <p><strong>AMBER</strong> supports importing the following types of genomic data:<span class="kbd">Mitogenomes</span>, <span class="kbd">Plastomes</span> , <span class="kbd">Nuclear Genomes</span> , <span class="kbd">Prokaryotic Genomes</span> and  <span class="kbd">Viral GEnomes</span></p>
                    <figure>
                      <img src="./images/howtouse/collection_02.png" alt="Collection of genomic data" data-lightbox>
                      <figcaption>Figure: Collection of genomic data</figcaption>
                    </figure>
                    <div class="callout info">Users can specify the genes for phylogenetic analysis in the Custom Genes section, using commas to separate multiple gene names.
                    AMBER will automatically search for and extract these genes from the provided genome files for downstream analysis.</div>
                  </div>
                  <div class="step-body">
                    <p><strong>(1) Import through Form</strong></p>
                    <p>To prepare the input table, create a file with column headers in the first row.
                    The name of the first column must follow the required format and must not be changed.
                    The second column should contain the NCBI accession numbers corresponding to each entry.
                    AMBER will use this information to automatically download and integrate the associated sequence data.</p>
                    <figure>
                      <img src="./images/howtouse/collection_02_form.png" alt="Form Data" data-lightbox>
                      <figcaption>Figure: Accession Numbers in the Form</figcaption>
                    </figure>
                    <p>The downloaded files are in GenBank format and are stored in the download_data folder.
                    If the data has already been downloaded, it will not be downloaded again upon re-import.
                    Frequently used files can be saved in the local_database folder.
                    If the required data is present in the local_database, AMBER will directly import it without initiating a new download.</p>
                    <div class="callout info">This functionality offers flexibility and efficiency by allowing users to manually download and store files, or import them from external sources.
                    By utilizing previously saved files, the system avoids redundant downloads, thereby improving workflow efficiency and reducing time consumption.</div>
                    <figure>
                      <img src="./images/howtouse/collection_01_download.png" alt="Sava Dat" data-lightbox>
                      <figcaption>Figure: Sava Data</figcaption>
                    </figure>
                    <div class="callout info">To improve efficiency, genes that are not immediately required can be stored in a separate folder.
                    They can be reintroduced into the working directory when needed.
                    This method minimizes unnecessary processing and reduces the overall time for sequence extraction.</div>
                  </div>
                  <div class="step-body">
                    <p><strong>(2) Import from Folder</strong></p>
                    <p>To prepare data for extraction, place the required GenBank files into the designated folder.
                    When dealing with nuclear or prokaryotic genomes in GenBank format, each taxon must be represented by a separate GenBank file to ensure proper parsing.
                    For annotation formats such as GFF, GTF, or TBL, each file should correspond to a single taxon as well.
                    Furthermore, a FASTA file with the same base filename (differing only by file extension) must accompany the annotation file in the same directory.
                    Without this corresponding FASTA file, data import will fail.</p>
                    <figure>
                      <img src="./images/howtouse/collection_02_datasets_form.png" alt="Import from Folder" data-lightbox>
                      <figcaption>Figure: Import from the Folder</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(3) Datasets presentation</strong></p>
                    <p>Sequence Data Statistics Imported from the Table</p>
                    <figure>
                      <img src="./images/howtouse/collection_02_datasets_form.png" alt="Presentation of datasets from the form" data-lightbox>
                      <figcaption>Figure: Presentation of datasets from the form</figcaption>
                    </figure>
                    <p>Statistical Summary of Sequences Imported from Folders</p>
                    <figure>
                      <img src="./images/howtouse/collection_02_datasets_folder.png" alt="Presentation of datasets from the folder" data-lightbox>
                      <figcaption>Figure: Presentation of datasets from the folder</figcaption>
                    </figure>
                  </div>
                  <div class="step-body">
                    <p><strong>(4) Sequences presentation</strong></p>
                    <p>Sequence Data Visualization</p>
                    <figure>
                      <img src="./images/howtouse/collection_01_sequences.png" alt="sequences presentation" data-lightbox>
                      <figcaption>Figure: Sequences presentation</figcaption>
                    </figure>
                  </div>
                </div>
              </div>

              <h3>2.2 Alignment</h3>
              <p>The sequence alignment module includes three alignment methods: MAFFT, MUSCLE, and Clustal Omega.</p>
              <table class="kv">
                <tr><th>MAFFT</th><td>MAFFT implements multiple alignment algorithms, including FFT-NS-2, L-INS-i, and G-INS-i, enabling efficient alignment of large-scale and highly divergent sequence datasets.</td></tr>
                <tr><th>MUSCLE</th><td>MUSCLE performs multiple sequence alignment through k-mer counting, progressive alignment, and refinement stages, offering a trade-off between speed and accuracy for medium to large datasets.</td></tr>
                <tr><th>Clustal Omega</th><td>Clustal Omega aligns protein or nucleotide sequences using mBed clustering, guide trees, and HMM-based profile alignment, optimized for high-throughput workflows.</td></tr>
              </table>
              <ul>
                <li>Click on the desired MSA method (<span class="kbd">MAFFT</span>, <span class="kbd">MUSCLE</span>, or <span class="kbd">Clustal Omega</span>) to bring it to the foreground.</li>
                <li>Configure the alignment parameters, then click <span class="kbd">Alignment</span> to start the process.</li>
                <li>Once the alignment is complete, the results can be viewed under the <span class="kbd">Sequences</span> section.</li>
              </ul>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">MAFFT</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Alignment_MAFFT.png" alt="MAFFT" data-lightbox>
                      <figcaption>Figure: Operation of MAFFT</figcaption>
                    </figure>
                    <div class="callout tip">MAFFT may take a short amount of time to run. The more sequences there are, the longer it will take. Please be patient.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">MUSCLE</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Alignment_MUSCLE.png" alt="MUSCLE" data-lightbox>
                      <figcaption>Figure: Operation of MUSCLE</figcaption>
                    </figure>
                    <div class="callout tip">MUSCLE requires some time to complete. The more sequences involved, the longer the process will take. Please be patient.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">3</span>
                    <span class="step-title">Clustal Omega</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Alignment_ClustalOmega.png" alt="Clustal Omega" data-lightbox>
                      <figcaption>Figure: Operation of Clustal Omega</figcaption>
                    </figure>
                    <div class="callout tip">Clustal Omega may take a relatively long time to run. The more sequences you include, the longer it will take. Please be patient.</div>
                  </div>
                </div>
              </div>
              <h3>2.3 Trimming</h3>
              <p>For processing low-quality sequences, two tools are provided: TrimAl and Gblocks, both of which help refine multiple sequence alignments by removing poorly aligned regions.</p>
              <table class="kv">
                <tr><th>TrimAl</th><td>TrimAl performs automated alignment trimming by applying gap-, similarity-, and consistency-based criteria (e.g., gappyout, strict, strictplus, automated1) to remove ambiguously aligned regions, facilitating downstream phylogenetic analyses on large datasets.</td></tr>
                <tr><th>Gblocks</th><td>Gblocks selects conserved blocks from multiple sequence alignments by enforcing thresholds on positional conservation, block length, and allowed gaps, reducing noise from poorly aligned regions to improve robustness of phylogenetic inference.</td></tr>
              </table>
              <ul>
                <li>Please click on the desired trimming method (<span class="kbd">TrimAl</span> or <span class="kbd">Gblocks</span>) to bring it to the foreground.</li>
                <li>Configure the parameters as needed, then click <span class="kbd">Trimming</span> to execute the process.</li>
                <li>Once the trimming is complete, the results can be viewed in the <span class="kbd">Sequences</span> section.</li>
              </ul>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">TrimAl</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Trimming_TrimAl.png" alt="TrimAl" data-lightbox>
                      <figcaption>Figure: Operation of TrimAl</figcaption>
                    </figure>
                    <div class="callout tip">Ideal for high-throughput pipelines; flexible presets (e.g., automated1, gappyout) efficiently remove ambiguous regions while retaining informative sites.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">Gblocks</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Trimming_Gblocks.png" alt="Gblocks" data-lightbox>
                      <figcaption>Figure: Operation of Gblocks</figcaption>
                    </figure>
                    <div class="callout tip">Conservative, reproducible block selection with explicit thresholds yields reliable core alignments and reduces false positives in phylogenetic inference.</div>
                  </div>
                </div>

              </div>
              <h3>2.4 Integrate</h3>
              <p>Concatenate the sequences into a single contiguous sequence.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Integrate.png" alt="Integrate" data-lightbox>
                      <figcaption>Figure: Operation of Integrate</figcaption>
                    </figure>
                    <div class="callout tip">Users can select and integrate the relevant sequences based on the objectives of the analysis.</div>
                  </div>
                </div>
              </div>
              <h3>2.5 Model</h3>
              <p>This module provides two tools for phylogenetic model selection and partitioning strategies: ModelFinder and PartitionFinder.</p>
              <table class="kv">
                <tr><th>ModelFinder</th><td>ModelFinder performs rapid statistical selection of nucleotide or amino-acid substitution models—including rate-heterogeneity options like +G and FreeRate—using information criteria to maximize likelihood (integrated in IQ-TREE).</td></tr>
                <tr><th>PartitionFinder</th><td>PartitionFinder identifies an optimal partitioning scheme and corresponding substitution models for multilocus alignments by clustering predefined data blocks and evaluating alternatives under information criteria (e.g., AICc, BIC) with heuristic searches.</td></tr>
              </table>
              <ul>
                <li>Click on the desired method (<span class="kbd">ModelFinder</span> or <span class="kbd">PartitionFinder</span>) to bring it to the foreground.</li>
                <li>Configure the necessary parameters, then click <span class="kbd">Model</span> to start the analysis.</li>
                <li>Once the process is complete, the results can be viewed in the corresponding folder.</li>
              </ul>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">ModelFinder</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Model_ModelFinder.png" alt="ModelFinder" data-lightbox>
                      <figcaption>Figure: Operation of ModelFinder</figcaption>
                    </figure>
                    <div class="callout tip">Fast, comprehensive model testing (including FreeRate and mixture/empirical matrices) delivers better-fitting substitution models with minimal runtime in IQ-TREE.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">PartitionFinder</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Model_PartitionFinder.png" alt="PartitionFinder" data-lightbox>
                      <figcaption>Figure: Operation of PartitionFinder</figcaption>
                    </figure>
                    <div class="callout tip">Automatically optimizes partitioning schemes and models across loci/codon positions, improving fit and accuracy while avoiding over-parameterization.</div>
                  </div>
                </div>

              </div>
              <h3>2.6 Reconstruct</h3>
              <p>The phylogenetic analysis module provides three of the most widely adopted methods for tree inference: IQ-TREE (maximum likelihood), MrBayes (Bayesian inference), and RAxML (rapid maximum likelihood).</p>
              <table class="kv">
                <tr><th>IQtree</th><td>A fast maximum-likelihood phylogenetics engine with efficient tree search, integrated ModelFinder, FreeRate (+R) models, and ultrafast bootstrap/SH-aLRT support assessment.</td></tr>
                <tr><th>MrBayes</th><td>A Bayesian phylogenetic inference program using Metropolis-coupled MCMC to estimate trees, model parameters, and posterior probabilities under complex, partitioned models.</td></tr>
                <tr><th>RAxML</th><td>A high-performance maximum-likelihood tool optimized for large datasets, offering rapid bootstrapping, extensive parallelization, and robust support for GTR-based and partitioned models.</td></tr>
              </table>
              <ul>
                <li>Click on the desired tree reconstruction method (<span class="kbd">IQ-TREE</span>, <span class="kbd">MrBayes</span>, or <span class="kbd">RAxML</span>) to bring it to the foreground.</li>
                <li>Configure the required parameters, then click <span class="kbd">Reconstruct</span> to initiate the analysis.</li>
                <li>Once the process is complete, the results can be viewed in the corresponding folder. </li>
              </ul>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">IQtree</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Reconstruct_IQtree.png" alt="IQtree" data-lightbox>
                      <figcaption>Figure: Operation of IQtree</figcaption>
                    </figure>
                    <div class="callout tip">Very fast ML inference with efficient tree search heuristics for large datasets. Robust support assessment via Ultrafast Bootstrap and SH-aLRT. Integrated ModelFinder and advanced models (e.g., FreeRate, mixture) with strong partition handling.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">MrBayes</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Reconstruct_MrBayes.png" alt="MrBayes" data-lightbox>
                      <figcaption>Figure: Operation of MrBayes</figcaption>
                    </figure>
                    <div class="callout tip">Full Bayesian framework yields posterior distributions of trees and parameters with explicit uncertainty. Supports complex, partitioned, and mixture models with flexible priors. Built-in convergence diagnostics and parallel chains (MC³) improve mixing and reliability.</div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">3</span>
                    <span class="step-title">RAxML</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Reconstruct_RAxML.png" alt="RAxML" data-lightbox>
                      <figcaption>Figure: Operation of RAxML</figcaption>
                    </figure>
                    <div class="callout tip">High-performance ML optimized for large, partitioned datasets with extensive parallelization. Rapid bootstrapping coupled with thorough ML searches provides reliable support quickly. Strong, battle-tested implementation for GTR-based and protein models across diverse data types.</div>
                  </div>
                </div>
              </div>
              
              <h3>2.7 Treeverse</h3>
              <p>Treeverse supports files in Newick format. There are two methods for adjusting tree visualization: Treesformer and Treeplotter. </p>
              <table class="kv">
                <tr><th>Treesformer</th><td>Used to adjust the display style of the phylogenetic tree structure.</td></tr>
                <tr><th>Treeplotter</th><td>Adjust the rendering method of the phylogenetic tree.</td></tr>
              </table>
              <p>Please click on the method ( <span class="kbd">Treesformer</span>, <span class="kbd">Treeplotter</span>) you'd like to use. Then set the parameters, and they will be automatically rendered on the page.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">Treesformer</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Treeverse.png" alt="Treesformer" data-lightbox>
                      <figcaption>Figure: Operation of Treesformer</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">Treeplotter</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Treeverse.png" alt="Treeplotter" data-lightbox>
                      <figcaption>Figure: Operation of Treeplotter</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

              </div>

              <h3>2.8 Phylogenetic Agent</h3>
              <p></p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Phylogenetic_Agent.png" alt="Phylogenetic Agent" data-lightbox>
                      <figcaption>Figure: Phylogenetic Agent</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>
              </div>

            </section>

            <!-- 3. Evolutionary Analysis -->
            <section>
              <h2>3. Evolutionary Analysis</h2>
              <h3>3.1 Molecular Evolution Analysis</h3>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">Synteny</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Molecular_Evolution_analysis_01.png" alt="Synteny" data-lightbox>
                      <figcaption>Figure: Operation of Synteny</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">Ka vs Ks</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Molecular_Evolution_analysis_02.png" alt="Ka vs Ks" data-lightbox>
                      <figcaption>Figure: Operation of Ka vs Ks</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">3</span>
                    <span class="step-title">Synteny and Ka vs Ks</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Molecular_Evolution_analysis_03.png" alt="Synteny and Ka vs Ks" data-lightbox>
                      <figcaption>Figure: Operation of Synteny and Ka vs Ks</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">4</span>
                    <span class="step-title">Classification</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Molecular_Evolution_analysis_04.png" alt="Classification" data-lightbox>
                      <figcaption>Figure: Operation of Classification</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

              </div>

              <h3>3.2 Population Genetics Analysis</h3>
              <p>Population genetics analyses, including PCA, Fst, nucleotide diversity (π), Tajima's D, Watterson's θ, and allele frequency spectrum, were conducted to characterize genetic variation and population structure.</p>
              <table class="kv">
                <tr><th>Fst</th><td>Fixation index measuring population differentiation: the proportion of genetic variance among subpopulations relative to the total (0–1), commonly estimated by Weir–Cockerham or Hudson methods, used in window-based scans for structure/selection but influenced by within-population diversity and sample size.</td></tr>
                <tr><th>nucleotide diversity (π)</th><td>Average number of pairwise nucleotide differences per site within a population, quantifying standing genetic variation; computed from genotype/allele frequencies or pairwise comparisons and often summarized in sliding windows across the genome.</td></tr>
                <tr><th>Tajima's D</th><td>Neutrality test comparing π to Watterson's θ to detect deviations from the standard neutral model: D≈0 suggests neutrality/constant size, D&gt;0 indicates balancing selection or population structure/bottlenecks, and D&lt;0 indicates purifying/positive selection or recent expansion (significance assessed via permutation/coalescent expectations).</td></tr>
                <tr><th>Watterson's θ</th><td>Estimator of the population mutation rate (θ = 4N<sub>e</sub>μ) derived from the number of segregating sites S (θ<sub>W</sub>=S/a<sub>1</sub>), providing a sample-size–adjusted measure of diversity under the infinite-sites, selective neutrality model.</td></tr>
              </table>
              <p>Click <span class="kbd">Population Genetics Analyses</span> to run after configuring the parameters.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Population_Genetics_Analysis.png" alt="Population Genetics Analysis" data-lightbox>
                      <figcaption>Figure: Operation of Population Genetics Analysis</figcaption>
                    </figure>
                    <div class="callout tip">Population genetics analyses integrate multi-scale statistics (e.g., F_ST, π, Tajima’s D, θ_W) with structure/phylogeny tools (PCA/ADMIXTURE/IBD) to quantify differentiation, demography, migration, and selection from loci to whole genomes. This yields robust, interpretable, and reproducible insights that pinpoint adaptive regions and guide conservation, breeding, and medical/agrigenomic decision-making—even with heterogeneous sampling and sequencing depth.</div>
                  </div>
                </div>
              </div>

              <h3>3.3 Community-Ecology Diversity</h3>
              <p>Community-ecology diversity analyses, including alpha and beta diversity metrics, PCoA, PERMANOVA, Mantel tests, and group-wise comparisons (t-test/ANOVA), were conducted to evaluate diversity and community differences across sample groups.</p>
              <table class="kv">
                <tr><th>PCoA</th><td>Principal Coordinates Analysis: eigen-decomposes a distance/dissimilarity matrix (e.g., Bray–Curtis, UniFrac, Euclidean) to place samples in a low-dimensional space; axes capture the greatest variation in pairwise dissimilarities (reported as % variance), enabling visualization of clustering/gradients and optional fitting of environmental vectors; note potential negative eigenvalues (often addressed by Cailliez/Lingoes corrections).</td></tr>

                <tr><th>PERMANOVA</th><td>Permutation-based multivariate ANOVA on a distance matrix that partitions variation among groups or model terms, yielding a pseudo-F statistic, R² (effect size), and p-value; flexible with complex formulas and any ecologically relevant distance; interpretation assumes similar within-group dispersions—check with PERMDISP as unequal dispersion can inflate significance.</td></tr>

                <tr><th>Mantel tests</th><td>Correlates two distance/dissimilarity matrices (e.g., community vs. environment or geographic distances) using Pearson/Spearman correlation with permutation to assess significance; useful for detecting congruent structure across datasets and for isolation-by-distance analyses; be mindful of limited power and potential biases from spatial autocorrelation or non-independence of matrix entries.</td></tr>
              </table>
              <p>Click <span class="kbd">Community-Ecology Diversity</span> to run after configuring the parameters.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/Community-Ecology_Diversity.png" alt="Community-Ecology Diversity" data-lightbox>
                      <figcaption>Figure: Operation of Community-Ecology Diversity</figcaption>
                    </figure>
                    <div class="callout tip">Community-ecology diversity frameworks quantify variation in species composition within and among communities using α/β/γ diversity, flexible indices (e.g., Hill numbers, Shannon/Simpson) and dissimilarities (e.g., Bray–Curtis, Jaccard). These metrics enable scale-aware comparisons, ordination and hypothesis testing, linking biodiversity patterns to environmental gradients, ecosystem function, and management decisions with interpretable, standardized outputs.</div>
                  </div>
                </div>
              </div>

            </section>

            <!-- 4. Gene Set Enrichment Analysis -->
            <section>
              <h2>4. Gene Set Enrichment Analysis (GSEA)</h2>
              <p>Gene set enrichment analyses (GSEA), including GO and KEGG pathway enrichment, Pre-ranked GSEA, Single-sample GSEA, and Gene Set Variation Analysis (GSVA), were performed to identify functional patterns in gene expression.</p>
              <table class="kv">
                <tr><th>GO and KEGG</th><td>Functional/pathway enrichment using GO terms and KEGG pathways to interpret gene lists.</td></tr>
                <tr><th>Prerank GSEA</th><td>Runs enrichment on a single pre-ranked gene list, returning ES/NES/FDR without phenotype labels.</td></tr>
                <tr><th>GSEA</th><td>Classic two-group, permutation-based enrichment; reports ES/NES/FDR and leading-edge subsets.</td></tr>
                <tr><th>ssGSEA</th><td>Computes per-sample gene set scores by ranking genes within each sample.</td></tr>
                <tr><th>GSVA</th><td>Non-parametric, sample-wise pathway activity estimation from gene expression data.</td></tr>
                <tr><th>Plotting</th><td>Publication-ready dotplots, barplots, and heatmaps for enrichment and expression visualization.</td></tr>
              </table>
              <div class="callout tip">Click <span class="kbd">Gene Set Enrichment Analysis</span> to run after configuring the parameters.</div>

              <h3>4.1 GO and KEGG</h3>
              <p>Gene Ontology (GO) is a curated framework that standardizes gene function descriptions across species via three domains—Biological Process, Molecular Function, and Cellular Component.</p>
              <p>KEGG (Kyoto Encyclopedia of Genes and Genomes) is an integrated database that maps genes to biochemical pathways, diseases, and drugs to contextualize molecular data in systems-level networks.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_GOKEGG.png" alt="GO and KEGG" data-lightbox>
                      <figcaption>Figure: Operation of GO and KEGG</figcaption>
                    </figure>
                    <div class="callout tip">GO: Offers a species-agnostic, hierarchical vocabulary for Biological Process, Molecular Function, and Cellular Component, enabling consistent gene annotations, fine-grained functional enrichment, and cross-dataset comparability.</div>
                    <div class="callout tip">KEGG: Provides manually curated pathway maps linking genes, metabolites, diseases, and drugs, facilitating systems-level interpretation, pathway enrichment, and actionable mechanistic insights for hypothesis generation.</div>
                  </div>
                </div>
              </div>

              <h3>4.2 Prerank GSEA</h3>
              <p>Preranked GSEA (GSEA-Preranked) evaluates gene set enrichment on a single, preordered gene list (ranked by a signed statistic such as log2FC or t-score), avoiding phenotype labels and small-sample permutations while returning ES, NES, and FDR for pathway significance.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_Prerank.png" alt="Prerank GSEA" data-lightbox>
                      <figcaption>Figure: Operation of Prerank GSEA</figcaption>
                    </figure>
                    <div class="callout tip">Preranked GSEA operates on a single, signed-statistic–ordered gene list, enabling fast, phenotype-agnostic detection of coordinated pathway shifts with stable ES/NES/FDR estimates—ideal for small cohorts, meta-analyses, or when only summary statistics are available.</div>
                  </div>
                </div>
              </div>

              <h3>4.3 GSEA</h3>
              <p>the GSEA performs classic gene set enrichment analysis on phenotype-labeled or pre-ranked gene lists, using permutation tests to compute enrichment scores, normalized enrichment scores (NES), and FDR/q-values, and outputs ranked results and visualizations to identify significantly enriched pathways.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_GSEA.png" alt="GSEA" data-lightbox>
                      <figcaption>Figure: Operation of GSEA</figcaption>
                    </figure>
                    <div class="callout tip">GSEA leverages phenotype labels or preranked gene lists to detect coordinated, subtle pathway shifts using permutation-based statistics with NES and FDR control, delivering robust, interpretable enrichment results with reproducible reports and rich visualizations.</div>
                  </div>
                </div>
              </div>

              <h3>4.4 ssGSEA</h3>
              <p>Single-sample Gene Set Enrichment Analysis (ssGSEA) computes an enrichment score for each gene set within each individual sample by ranking genes per sample, enabling pathway activity profiling at single-sample resolution.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_ssGSEA.png" alt="ssGSEA" data-lightbox>
                      <figcaption>Figure: Operation of ssGSEA</figcaption>
                    </figure>
                    <div class="callout tip">ssGSEA ranks genes within each sample to compute per-sample gene set enrichment scores without phenotype labels or strong distributional assumptions, yielding robust, cross-platform–comparable, and interpretable individual-level pathway activity profiles in heterogeneous cohorts.</div>
                  </div>
                </div>
              </div>

              <h3>4.5 GSVA</h3>
              <p>Gene Set Variation Analysis (GSVA) is a non-parametric, unsupervised method that estimates variation of pathway activity over a sample population in an expression dataset.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_GSVA.png" alt="GSVA" data-lightbox>
                      <figcaption>Figure: Operation of GSVA</figcaption>
                    </figure>
                    <div class="callout tip">GSVA transforms gene-level expression data into pathway-level enrichment scores, enabling the analysis of subtle pathway activity changes across samples without relying on predefined phenotypes.</div>
                  </div>
                </div>
              </div>

              <h3>4.6 Plotting</h3>
              <p>Based on the data analysis results from the previous section, the corresponding visualizations—including dot plots, bar plots, and heatmaps—can be generated.</p>
              <table class="kv">
                <tr><th>dotplot</th><td>A visualization that uses dots to represent values, showing gene expression or enrichment scores across different categories.</td></tr>
                <tr><th>barplot</th><td>A chart that uses bars to compare quantities across categories, useful for showing counts, expression levels, or statistical results.</td></tr>
                <tr><th>heatmap</th><td>A graphical representation of data where individual values are represented as colors, used to display gene expression patterns or similarity matrices.</td></tr>
              </table>
              <ul>
                <li>Click on the desired visualization method (<span class="kbd">dotplot</span>, <span class="kbd">barplot</span> or <span class="kbd">heatmap</span>）to bring it to the foreground.</li>
                <li>Next, configure the necessary parameters and click <span class="kbd">Gene Set Enrichment Analysis</span> to initiate the analysis.</li>
                <li>Once the process is complete, the results can be viewed in the corresponding folder.</li>
              </ul>
              <div class="steps">
                <div class="step">
                  <div class="step-header">
                    <span class="step-num">1</span>
                    <span class="step-title">GSEA dotplot</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_Plotting_dotplot.png" alt="GSEA dotplot" data-lightbox>
                      <figcaption>Figure: Operation of GSEA dotplot</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">2</span>
                    <span class="step-title">barplot</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_Plotting_barplot.png" alt="barplot" data-lightbox>
                      <figcaption>Figure: Operation of barplot</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-header">
                    <span class="step-num">3</span>
                    <span class="step-title">heatmap</span>
                  </div>
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/GSEA_Plotting_heatmap.png" alt="GSEA heatmap" data-lightbox>
                      <figcaption>Figure: Operation of GSEA heatmap</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>

              </div>
            </section>

            <!-- 5. NCBI -->
            <section>
              <h2>5. NCBI</h2>
              <p>The NCBI (National Center for Biotechnology Information) website provides integrated access to a wide range of biological databases, including genomic, sequence, literature, and protein structure resources.</p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <figure>
                      <img src="./images/howtouse/NCBI.png" alt="NCBI web portal interface" data-lightbox>
                      <figcaption>Figure: NCBI web portal interface</figcaption>
                    </figure>
                    <div class="callout tip">We can search for and download data according to specific research needs.</div>
                  </div>
                </div>
              </div>
            </section>

            <!-- 6. 反馈与支持 -->
            <section>
              <h2>6. AMBER Agent</h2>
              <p></p>
              <div class="steps">
                <div class="step">
                  <div class="step-body">
                    <p>The default parameters are already configured. You may run it as-is or adjust the parameters to suit your requirements.</p>
                    <figure>
                      <img src="./images/howtouse/AMBER_Agent.png" alt="AMBER Agent" data-lightbox>
                      <figcaption>Figure: AMBER Agent</figcaption>
                    </figure>
                    <div class="callout tip"></div>
                  </div>
                </div>
              </div>

            </section>
          </article>
        </div>
      </section>

      <!-- 其它栏目（保持） -->
      <section id="downloadContainer" class="content-section">
        <div class="card"><h3>Software</h3><p>……</p></div>
        <div class="card"><h3>Toolbox</h3><p>……</p></div>
      </section>

      <section id="exampleContainer" class="content-section">
        <div class="card"><h3>Phylogenetic Analysis Example</h3><p>……</p></div>
        <div class="card"><h3>Evolutionary Analysis Example</h3><p>……</p></div>
        <div class="card"><h3>Gene Set Enrichment Analysis Example</h3><p>……</p></div>
      </section>

      <section id="datasetContainer" class="content-section">
        <div class="card"><h3>Multi-gene</h3><p>……</p></div>
        <div class="card"><h3>Mitogenome</h3><p>……</p></div>
      </section>

      <section id="publicationContainer" class="content-section">
        <div class="card"><h3>Articles</h3><p>……</p></div>
      </section>

      <section id="contactContainer" class="content-section">
        <div class="card"><h3>Contact</h3><p>Email: </p></div>
        <div class="card"><h3>Location</h3><p>Address: No. 519, Kunzhou Road, Xishan District, Kunming City, Yunnan Province, China</p><p>Postal Code: 650118</p></div>
      </section>
    </main>

    <footer class="site-footer">
      <p>&copy; 2025 Guodong Lab. All rights reserved.</p>
    </footer>
  </div>

  <!-- ===== JS ===== -->
  <script>
    /* ========= 轮播 ========= */
    const slides = [
      { url:'./images/header/a01.png', title:'Phylogenetic Analysis', color:'rgba(36,31,33,.6)', alt:'Phylogenetic Analysis' },
      { url:'./images/header/a02.png', title:'Evolutionary Analysis', color:'rgba(43,35,26,.6)', alt:'Evolutionary Analysis' },
      { url:'./images/header/a03.png', title:'Gene Set Enrichment Analysis', color:'rgba(36,31,33,.6)', alt:'Gene Set Enrichment Analysis' },
      { url:'./images/header/a04.png', title:'NCBI', color:'rgba(43,35,26,.6)', alt:'NCBI' },
      { url:'./images/header/a05.png', title:'ABMER AGENT & PHYLOGENETIC AGENT', color:'rgba(36,31,33,.6)', alt:'ABMER AGENT & PHYLOGENETIC AGENT' },
      { url:'./images/header/a06.png', title:'TREEVERSE', color:'rgba(43,35,26,.6)', alt:'TREEVERSE' },
    ];
    const sliderEl = document.querySelector('.slider');
    const imgEl = document.querySelector('.slider-wrapper img');
    const titleEl = document.getElementById('sliderTitle');
    const footerEl = document.getElementById('sliderFooter');
    const nextBtn = document.querySelector('.next');
    const prevBtn = document.querySelector('.prev');
    const dots = Array.from(document.querySelectorAll('.slider-indicator li'));
    let idx=0, autoplayId=null; const AUTOPLAY=3000;
    function show(i){ idx=(i+slides.length)%slides.length; const s=slides[idx];
      imgEl.src=s.url; imgEl.alt='Slide: '+(s.alt||s.title); titleEl.textContent=s.title; footerEl.style.backgroundColor=s.color;
      document.querySelector('.slider-indicator li.active')?.classList.remove('active'); dots[idx]?.classList.add('active');
      dots.forEach((d,k)=>d.setAttribute('aria-selected',k===idx?'true':'false'));
    }
    function next(){ show(idx+1); } function prev(){ show(idx-1); }
    function start(){ stop(); autoplayId=setInterval(next,AUTOPLAY); }
    function stop(){ if(autoplayId){ clearInterval(autoplayId); autoplayId=null; } }
    function interacted(){ stop(); start(); }
    nextBtn.addEventListener('click', ()=>{ next(); interacted(); });
    prevBtn.addEventListener('click', ()=>{ prev(); interacted(); });
    dots.forEach((d,i)=>{ d.addEventListener('click', ()=>{ show(i); interacted(); }); d.addEventListener('keydown',e=>{ if(['Enter',' '].includes(e.key)){ e.preventDefault(); show(i); interacted(); } })});
    sliderEl.addEventListener('mouseenter', stop); sliderEl.addEventListener('mouseleave', start);
    let sx=0; sliderEl.addEventListener('touchstart',e=>{ sx=e.changedTouches[0].clientX; },{passive:true});
    sliderEl.addEventListener('touchend',e=>{ const dx=e.changedTouches[0].clientX-sx; if(Math.abs(dx)>40){ dx<0?next():prev(); interacted(); } },{passive:true});
    document.addEventListener('visibilitychange',()=>{ document.hidden?stop():start(); });
    show(0); start();

    /* ========= 路由切换 ========= */
    const navLinks=document.querySelectorAll('.navbar a');
    const sections=document.querySelectorAll('.content-section');
    const mobileSelect=document.getElementById('mobileNav');
    function switchTo(id){
      const cur=document.querySelector('.content-section.show');
      const tar=document.getElementById(id);
      if(!tar||cur===tar) return;
      cur?.classList.remove('fade-in'); cur?.classList.add('fade-out');
      setTimeout(()=>{ cur?.classList.remove('fade-out','show'); tar.classList.add('show'); setTimeout(()=>tar.classList.add('fade-in'),16); },180);
      document.querySelector('.navbar a.active')?.classList.remove('active');
      document.querySelector(`.navbar a[href="#${id}"]`)?.classList.add('active');
      if(mobileSelect && mobileSelect.value!==`#${id}`) mobileSelect.value=`#${id}`;
    }
    navLinks.forEach(a=>a.addEventListener('click',e=>{ e.preventDefault(); const id=a.getAttribute('href').slice(1); history.pushState({section:id},'',`#${id}`); switchTo(id); }));
    mobileSelect.addEventListener('change',function(){ if(!this.value) return; const id=this.value.slice(1); history.pushState({section:id},'',`#${id}`); switchTo(id); });
    function initByHash(){ const h=location.hash.slice(1)||'homeContainer';
      sections.forEach(s=>s.classList.remove('show','fade-in','fade-out'));
      document.querySelectorAll('.navbar a').forEach(a=>a.classList.remove('active'));
      document.querySelector(`.navbar a[href="#${h}"]`)?.classList.add('active');
      document.getElementById(h)?.classList.add('show','fade-in');
      if(mobileSelect) mobileSelect.value=`#${h}`;
    }
    window.addEventListener('load', initByHash);
    window.addEventListener('popstate', ()=>{ const h=location.hash.slice(1)||'homeContainer'; switchTo(h); });

    /* ========= GUI 手册增强：目录 / 高亮 / 灯箱 / FAQ ========= */
    (function manualEnhance(){
      const body = document.getElementById('manualBody');
      if(!body) return;

      // 1) h2/h3 自动 id
      const headings = body.querySelectorAll('h2, h3');
      const slugMap = new Map();
      const slugify = (t)=>{
        const base = (t||'section').trim().toLowerCase().replace(/[^\u4e00-\u9fa5\w\s\-]+/g,'').replace(/\s+/g,'-');
        if(!slugMap.has(base)){ slugMap.set(base,0); return base; }
        const n=slugMap.get(base)+1; slugMap.set(base,n); return `${base}-${n}`;
      };
      headings.forEach(h=>{ if(!h.id) h.id = slugify(h.textContent); });

      // 2) 构建 TOC
      const toc = document.getElementById('manualToc');
      const frag = document.createDocumentFragment();
      headings.forEach(h=>{
        if(!(h.tagName==='H2' || h.tagName==='H3')) return;
        const a=document.createElement('a'); a.href=`#${h.id}`; a.textContent=h.textContent; a.className = h.tagName==='H2' ? 'toc-l2' : 'toc-l3';
        a.addEventListener('click',(e)=>{ e.preventDefault(); document.getElementById(h.id)?.scrollIntoView({behavior:'smooth', block:'start'}); history.pushState(null,'',`#${h.id}`); });
        frag.appendChild(a);
      });
      toc.innerHTML=''; toc.appendChild(frag);

      // 3) 滚动高亮
      const tocLinks = Array.from(toc.querySelectorAll('a'));
      const spy = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
          const id=en.target.id; const link = tocLinks.find(a=>a.getAttribute('href')===`#${id}`);
          if(!link) return;
          if(en.isIntersecting){ tocLinks.forEach(n=>n.classList.remove('active')); link.classList.add('active'); }
        });
      }, { rootMargin:'0px 0px -70% 0px', threshold:0.1 });
      headings.forEach(h=>spy.observe(h));

      // 4) 图片灯箱：任意带 data-lightbox 的 <img>
      const lightbox = document.createElement('div');
      lightbox.className='lightbox';
      lightbox.innerHTML = '<span class="close" title="关闭">×</span><img alt="Preview">';
      document.body.appendChild(lightbox);
      const lbImg = lightbox.querySelector('img');
      const lbClose = lightbox.querySelector('.close');
      body.querySelectorAll('img[data-lightbox]').forEach(img=>{
        img.addEventListener('click', ()=>{
          lbImg.src = img.src;
          lightbox.classList.add('open');
        });
      });
      function closeLB(){ lightbox.classList.remove('open'); lbImg.src=''; }
      lbClose.addEventListener('click', closeLB);
      lightbox.addEventListener('click', (e)=>{ if(e.target===lightbox) closeLB(); });
      window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeLB(); });

      // 5) FAQ 折叠
      document.querySelectorAll('.accordion .ac-item').forEach(item=>{
        const head = item.querySelector('.ac-head');
        head.addEventListener('click', ()=> item.classList.toggle('open'));
      });

      // 6) 如果 URL 带有锚点，进入后平滑定位
      if(location.hash){
        const el = document.getElementById(location.hash.slice(1));
        el && setTimeout(()=>el.scrollIntoView({behavior:'smooth', block:'start'}), 200);
      }
    })();
  </script>
</body>
</html>
