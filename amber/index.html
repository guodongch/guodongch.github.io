<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AMBER</title>
  <link rel="icon" href="./images/amberSpider.ico" type="image/x-icon">
  <style>
    html { font-size: 10px; }
    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
      line-height: 1.6; color:#222; background:#fff;
    }
    .page{ display:grid; grid-template-rows:auto auto 1fr auto; min-height:100vh; }

    /* ===== é¡¶éƒ¨è½®æ’­ï¼ˆä¸åŸç‰ˆä¸€è‡´ï¼Œç•¥å¾®ç²¾ç®€ï¼‰ ===== */
    header.slider{ justify-self:center; width:100%; }
    .slider{ width:100%; aspect-ratio:9.6/1; overflow:hidden; position:relative; }
    .slider-wrapper{ width:100%; height:100%; position:relative; }
    .slider-wrapper img{ width:100%; height:100%; object-fit:cover; display:block; }
    .slider-footer{ position:absolute; inset:auto 0 0 0; height:40px; background:rgba(36,31,33,.6); color:#fff; padding:2px 12px 0; display:flex; flex-direction:column; justify-content:space-between; }
    .slider-footer p{ font-size:15px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .slider-indicator{ list-style:none; display:flex; gap:6px; }
    .slider-indicator li{ width:6px; height:6px; border-radius:50%; background:#fff; opacity:.4; cursor:pointer; }
    .slider-indicator li.active{ opacity:1; transform:scale(1.05); }
    .toggle{ position:absolute; right:8px; top:5px; display:flex; gap:12px; }
    .toggle button{ width:30px; height:30px; border:none; border-radius:4px; background:rgba(255,255,255,.12); color:#fff; cursor:pointer; }
    .toggle button:hover{ background:rgba(255,255,255,.22); }

    /* ===== å¯¼èˆª ===== */
    nav.navbar{ position:sticky; top:0; z-index:100; background:#CD853F; box-shadow:0 2px 6px rgba(0,0,0,.06); padding:0 24px; }
    .navbar ul{ display:grid; grid-auto-flow:column; gap:12rem; height:6rem; align-items:center; list-style:none; justify-content:center; overflow:auto hidden; }
    .navbar a{ color:#fff; text-decoration:none; font-size:16px; font-weight:600; padding:4px 0; transition:color .2s; }
    .navbar a:hover{ color:#FFD700; }
    .navbar a.active{ color:#FFD700; position:relative; }
    .navbar a.active::after{ content:''; position:absolute; left:0; bottom:-4px; width:100%; height:2px; background:#FFD700; border-radius:1px; }

    /* ===== æ‰‹æœºèœå• ===== */
    .mobile-menu{ display:none; padding:12px; background:#CD853F; }
    .mobile-menu select{ width:100%; font-size:16px; padding:8px; border-radius:4px; border:none; }

    /* ===== ä¸»ä½“ ===== */
    main.content-container{
      display:grid; grid-template-columns:1fr; gap:24px; padding:32px; max-width:1200px; width:100%; margin-inline:auto;
    }
    .content-section{
      display:none; grid-template-columns:1fr; gap:24px; align-content:start; opacity:0; pointer-events:none; transition:opacity .3s ease;
    }
    .content-section.show{ display:grid; }
    .content-section.fade-in{ opacity:1; pointer-events:auto; }
    .content-section.fade-out{ opacity:0; pointer-events:none; }

    .card{ background:#D7FFD7; border-radius:8px; padding:24px; display:grid; gap:12px; }
    .card h3{ font-size:20px; }
    .card p{ font-size:1.6rem; color:#555; }

    /* ===== ä½¿ç”¨æ‰‹å†Œæ ·å¼ï¼ˆINSTRUCTION æ”¹é€ ï¼‰ ===== */
    .manual{
      display:grid; grid-template-columns: 280px 1fr; gap:24px;
    }
    .manual .toc{
      position:sticky; top:80px; align-self:start; background:#fff; border:1px solid #eee; border-radius:8px; padding:16px; max-height: calc(100vh - 120px); overflow:auto;
    }
    .manual .toc h4{ font-size:14px; color:#666; margin-bottom:8px; }
    .manual .toc a{ display:block; font-size:14px; color:#333; text-decoration:none; padding:4px 6px; border-radius:4px; }
    .manual .toc a:hover{ background:#f6f6f6; }
    .manual .toc a.active{ color:#0a7f2e; background:#e7f7ec; font-weight:600; }
    .manual .toc .toc-l2{ padding-left:12px; }
    .manual .toc .toc-l3{ padding-left:24px; }

    .manual .manual-body{
      background:#fff; border:1px solid #eee; border-radius:8px; padding:24px;
    }
    .manual .manual-body h1{ font-size:2.4rem; margin-bottom:8px; }
    .manual .manual-body .meta{ display:flex; gap:12px; flex-wrap:wrap; margin-bottom:16px; color:#666; font-size:1.3rem; }
    .badge{
      display:inline-flex; align-items:center; gap:6px; font-size:12px; padding:4px 8px; border-radius:999px; background:#f0f0f0; color:#333;
    }
    .badge.success{ background:#e7f7ec; color:#0a7f2e; }
    .badge.info{ background:#e7f0ff; color:#1f4ed8; }
    .badge.warn{ background:#fff7e6; color:#a15d00; }

    .manual .manual-body h2{ font-size:2rem; margin:24px 0 12px; }
    .manual .manual-body h3{ font-size:1.8rem; margin:18px 0 8px; }
    .manual .manual-body p, .manual .manual-body li{ font-size:1.5rem; color:#333; }
    .manual .manual-body ul, .manual .manual-body ol{ padding-left:16px; margin:8px 0 12px; }

    /* ä»£ç å— */
    pre{ position:relative; background:#0b1020; color:#e6edf3; padding:14px 16px; border-radius:8px; overflow:auto; }
    pre code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:13px; }
    .copy-btn{
      position:absolute; right:10px; top:10px; font-size:12px; border:none; padding:6px 8px; border-radius:6px; background:#233; color:#cde; cursor:pointer;
    }
    .copy-btn:hover{ background:#2c3e; }

    /* å¹³å° Tab */
    .tabs{ display:flex; gap:8px; border-bottom:1px solid #eee; margin-bottom:12px; }
    .tab-btn{
      appearance:none; border:none; background:#f1f1f1; color:#333; padding:6px 10px; border-radius:6px 6px 0 0; cursor:pointer; font-size:12px;
    }
    .tab-btn[aria-selected="true"]{ background:#fff; border:1px solid #eee; border-bottom-color:#fff; }
    .tab-panel{ display:none; }
    .tab-panel.active{ display:block; }

    /* Callouts */
    .callout{ border-left:4px solid #999; background:#f8f8f8; padding:12px 14px; border-radius:6px; margin:12px 0; }
    .callout.tip{ border-left-color:#0a7f2e; background:#e7f7ec; }
    .callout.warn{ border-left-color:#a15d00; background:#fff7e6; }
    .callout.info{ border-left-color:#1f4ed8; background:#e7f0ff; }

    /* æ‰“å°ï¼šä»…æ‰“å°æ‰‹å†Œæ­£æ–‡ */
    @media print{
      header.slider, nav.navbar, .mobile-menu, footer.site-footer, #homeContainer, #publicationContainer, #downloadContainer, #exampleContainer, #datasetContainer, #teamContainer, #piContainer, #contactContainer { display:none !important; }
      #instructionContainer{ display:block !important; opacity:1 !important; }
      .manual{ grid-template-columns: 1fr; }
      .manual .toc{ display:none; }
      body{ background:#fff; }
    }

    /* å“åº”å¼ */
    @media (max-width: 1024px){
      .manual{ grid-template-columns: 1fr; }
      .manual .toc{ position:relative; top:auto; max-height:none; }
    }
    @media (max-width: 768px){
      .navbar{ display:none; }
      .mobile-menu{ display:block; }
      main.content-container{ padding:16px; }
      .manual .manual-body{ padding:16px; }
    }
  </style>
</head>
<body>
  <div class="page">

    <!-- ===== è½®æ’­ ===== -->
    <header class="slider" role="region" aria-label="Hero carousel">
      <div class="slider-wrapper">
        <img src="./images/header/a01.png" alt="Slide: Bioinformatics" />
        <div class="slider-footer" id="sliderFooter" aria-live="polite">
          <p id="sliderTitle">Bioinformatics</p>
          <ul class="slider-indicator" role="tablist" aria-label="Carousel indicators">
            <li class="active" role="tab" aria-selected="true" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
            <li role="tab" aria-selected="false" tabindex="0"></li>
          </ul>
          <div class="toggle">
            <button class="prev" aria-label="Previous slide" title="Previous">&lt;</button>
            <button class="next" aria-label="Next slide" title="Next">&gt;</button>
          </div>
        </div>
      </div>
    </header>

    <!-- ===== é¡¶éƒ¨å¯¼èˆª ===== -->
    <nav class="navbar" aria-label="Primary">
      <ul>
        <li><a href="#homeContainer">HOME</a></li>
        <li><a href="#downloadContainer">DOWNLOAD</a></li>
        <li><a href="#instructionContainer">INSTRUCTION</a></li>
        <li><a href="#exampleContainer">EXAMPLE</a></li>
        <li><a href="#datasetContainer">DATASET</a></li>
        <li><a href="#publicationContainer">PUBLICATION</a></li>
        <li><a href="#contactContainer">CONTACT</a></li>
      </ul>
    </nav>

    <!-- æ‰‹æœºèœå• -->
    <div class="mobile-menu">
      <select id="mobileNav">
        <option value="">MENU</option>
        <option value="#homeContainer">HOME</option>
        <option value="#downloadContainer">DOWNLOAD</option>
        <option value="#instructionContainer">INSTRUCTION</option>
        <option value="#exampleContainer">EXAMPLE</option>
        <option value="#datasetContainer">DATASET</option>
        <option value="#publicationContainer">PUBLICATION</option>
        <option value="#contactContainer">CONTACT</option>
      </select>
    </div>

    <!-- ===== ä¸»ä½“ ===== -->
    <main class="content-container">

      <!-- å…¶ä»–æ ç›®ï¼ˆä¿æŒä¸ä½ ä¹‹å‰ä¸€è‡´ï¼Œå¯æŒ‰éœ€ç¼–è¾‘ï¼‰ -->
      <section id="homeContainer" class="content-section show fade-in">
        <div class="card"><h3>NEWS</h3><p></p></div>
        <div class="card"><h3>With Purpose Unchanged, Our Dreams Set Sail</h3><p></p></div>
      </section>

      <!-- ===== ä½¿ç”¨æ‰‹å†Œï¼ˆæ–°ç‰ˆ INSTRUCTIONï¼‰ ===== -->
      <section id="instructionContainer" class="content-section">
        <div class="manual">
          <!-- å·¦ä¾§ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰ -->
          <aside class="toc" aria-label="Manual Table of Contents">
            <h4>ä½¿ç”¨æ‰‹å†Œç›®å½•</h4>
            <nav id="manualToc"></nav>
          </aside>

          <!-- å³ä¾§æ­£æ–‡ -->
          <article class="manual-body" id="manualBody">
            <header>
              <h1>AMBER ä½¿ç”¨æ‰‹å†Œ</h1>
              <div class="meta">
                <span class="badge info">ç‰ˆæœ¬ï¼šv1.0.0</span>
                <span class="badge">æ›´æ–°æ—¶é—´ï¼š2025-09-20</span>
                <span class="badge success">ç¨³å®š</span>
              </div>
              <div class="callout tip">
                ğŸ’¡ å°æç¤ºï¼šç›®å½•ã€é”šç‚¹ä¸æ»šåŠ¨é«˜äº®éƒ½æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ä½ åªéœ€ç»´æŠ¤ä¸‹é¢çš„æ ‡é¢˜ï¼ˆH2/H3ï¼‰ä¸æ­£æ–‡å†…å®¹å³å¯ã€‚
              </div>
            </header>

            <!-- ä½ åªéœ€æŒ‰éœ€ç¼–è¾‘ä»¥ä¸‹å„èŠ‚å†…å®¹å³å¯ï¼›ç›®å½•ä¼šè‡ªåŠ¨è¯†åˆ« h2 / h3 -->
            <section>
              <h2>1. ä»‹ç»</h2>
              <p>AMBER æ˜¯ç”¨äº <em>ï¼ˆåœ¨æ­¤ç®€è¿°ä½ çš„è½¯ä»¶æ ¸å¿ƒåŠŸèƒ½/åº”ç”¨åœºæ™¯ï¼‰</em> çš„å·¥å…·å¥—ä»¶ï¼Œæ”¯æŒè·¨å¹³å°è¿è¡Œï¼Œå¹¶æä¾›å‘½ä»¤è¡Œä¸å¯ç¼–ç¨‹ API ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚</p>
              <div class="callout info">
                âœ… é€‚ç”¨å¯¹è±¡ï¼šç ”ç©¶è€…ã€å·¥ç¨‹å¸ˆã€å­¦ç”Ÿï¼›<br>
                âœ… æ”¯æŒå¹³å°ï¼šWindows / macOS / Linuxã€‚
              </div>
            </section>

            <section>
              <h2>2. å®‰è£…</h2>
              <h3>2.1 ç³»ç»Ÿè¦æ±‚</h3>
              <ul>
                <li>æ“ä½œç³»ç»Ÿï¼šWindows 10+/macOS 12+/Ubuntu 20.04+</li>
                <li>CPU/å†…å­˜ï¼šâ‰¥ 2 æ ¸ / 8 GB RAM</li>
                <li>ä¾èµ–ï¼šPython 3.10+ æˆ– Node.js 18+ï¼ˆæŒ‰ä½ çš„å®ç°ä¿®æ”¹ï¼‰</li>
              </ul>

              <h3>2.2 é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…</h3>
              <!-- å¹³å°å‘½ä»¤ Tab ç¤ºä¾‹ -->
              <div class="tabs" role="tablist" aria-label="Install Tabs">
                <button class="tab-btn" role="tab" aria-selected="true" data-tab="win">Windows (PowerShell)</button>
                <button class="tab-btn" role="tab" aria-selected="false" data-tab="mac">macOS (zsh)</button>
                <button class="tab-btn" role="tab" aria-selected="false" data-tab="linux">Linux (bash)</button>
              </div>
              <div id="tab-panels-install">
                <div class="tab-panel active" data-panel="win" role="tabpanel">
                  <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>winget install YourOrg.AMBER</code></pre>
                </div>
                <div class="tab-panel" data-panel="mac" role="tabpanel">
                  <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>brew tap yourorg/tap
brew install amber</code></pre>
                </div>
                <div class="tab-panel" data-panel="linux" role="tabpanel">
                  <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>curl -fsSL https://your.domain/install.sh | bash</code></pre>
                </div>
              </div>

              <h3>2.3 ä»æºç æ„å»º</h3>
              <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>git clone https://your.domain/amber.git
cd amber
make build  # æˆ–è€…: npm i && npm run build / pip install -e .</code></pre>
            </section>

            <section>
              <h2>3. å¿«é€Ÿå¼€å§‹</h2>
              <h3>3.1 è¿è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡</h3>
              <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>amber run --input samples/demo.fastq --out results/demo --threads 8</code></pre>
              <div class="callout tip">å¦‚æœä½ åªæœ‰ä¸€å°åŒæ ¸ç¬”è®°æœ¬ï¼ŒæŠŠ <code>--threads</code> è®¾ä¸º 2~4 å³å¯ã€‚</div>

              <h3>3.2 æœ€å°é…ç½®æ–‡ä»¶</h3>
              <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code># config.yaml
input: samples/demo.fastq
output_dir: results/demo
threads: 8
modes:
  - align
  - call
  - report</code></pre>
            </section>

            <section>
              <h2>4. å‘½ä»¤è¡Œé€‰é¡¹</h2>
              <h3>4.1 å¸¸ç”¨å‚æ•°</h3>
              <ul>
                <li><code>--input &lt;path&gt;</code>ï¼šè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰ã€‚</li>
                <li><code>--out &lt;dir&gt;</code>ï¼šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ <code>./results</code>ï¼‰ã€‚</li>
                <li><code>--threads &lt;n&gt;</code>ï¼šå¹¶è¡Œçº¿ç¨‹æ•°ï¼ˆé»˜è®¤æ ¹æ® CPU è‡ªåŠ¨ï¼‰ã€‚</li>
                <li><code>--mode &lt;name&gt;</code>ï¼šè¿è¡Œæ¨¡å¼ï¼ˆ<code>align</code>ã€<code>call</code>ã€<code>report</code>ï¼‰ã€‚</li>
                <li><code>--config &lt;file&gt;</code>ï¼šä» YAML é…ç½®åŠ è½½å‚æ•°ã€‚</li>
              </ul>

              <h3>4.2 ç¤ºä¾‹ï¼šç»„åˆå‚æ•°</h3>
              <pre><button class="copy-btn" data-copy>å¤åˆ¶</button><code>amber run \
  --input data/sample1.fastq \
  --out results/sample1 \
  --threads 12 \
  --mode align,call,report</code></pre>
            </section>

            <section>
              <h2>5. è¾“å‡ºä¸æ—¥å¿—</h2>
              <ul>
                <li><code>logs/amber.log</code>ï¼šå®Œæ•´æ—¥å¿—ã€‚</li>
                <li><code>report/index.html</code>ï¼šäº¤äº’å¼æŠ¥å‘Šã€‚</li>
                <li><code>metrics.json</code>ï¼šå…³é”®æŒ‡æ ‡æ±‡æ€»ã€‚</li>
              </ul>
              <div class="callout info">å»ºè®®æŠŠ <code>results/</code> è®¾ç½®åˆ° SSD ç›˜ä»¥æå‡ I/O æ€§èƒ½ã€‚</div>
            </section>

            <section>
              <h2>6. å¸¸è§é—®é¢˜</h2>
              <h3>6.1 å®‰è£…å¤±è´¥</h3>
              <p>è¯·æ£€æŸ¥ç½‘ç»œä¸åŒ…ç®¡ç†å™¨æºæ˜¯å¦å¯ç”¨ï¼›æˆ–æ”¹ç”¨æºç æ„å»ºã€‚</p>
              <h3>6.2 æ€§èƒ½ä¸ä½³</h3>
              <p>å‡å°‘å¹¶å‘ã€å…³é—­æ€æ¯’å®æ—¶æ‰«æã€æˆ–æŠŠä¸´æ—¶ç›®å½•æ”¾åˆ°æœ¬åœ° SSDã€‚</p>
            </section>

            <section>
              <h2>7. åé¦ˆä¸æ”¯æŒ</h2>
              <p>æäº¤ Issueï¼š<em>ï¼ˆæ›¿æ¢ä¸ºä½ çš„é‚®ç®±/Git ä»“åº“/å·¥å•ç³»ç»Ÿï¼‰</em></p>
            </section>
          </article>
        </div>
      </section>

      <!-- å…¶å®ƒæ ç›®ï¼ˆä¿æŒï¼‰ -->
      <section id="downloadContainer" class="content-section">
        <div class="card"><h3>Software</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Toolbox</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Dataset</h3><p>â€¦â€¦</p></div>
      </section>

      <section id="exampleContainer" class="content-section">
        <div class="card"><h3>Software</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Toolbox</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Dataset</h3><p>â€¦â€¦</p></div>
      </section>

      <section id="datasetContainer" class="content-section">
        <div class="card"><h3>Software</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Toolbox</h3><p>â€¦â€¦</p></div>
        <div class="card"><h3>Dataset</h3><p>â€¦â€¦</p></div>
      </section>

      <section id="publicationContainer" class="content-section">
        <div class="card"><h3>Articles</h3><p>â€¦â€¦</p></div>
      </section>

      <section id="contactContainer" class="content-section">
        <div class="card"><h3>Contact</h3><p>Email: </p></div>
        <div class="card"><h3>Location</h3><p>Address: No. 519, Kunzhou Road, Xishan District, Kunming City, Yunnan Province, China</p><p>Postal Code: 650118</p></div>
      </section>
    </main>

    <footer class="site-footer">
      <p>&copy; 2025 Guodong Lab. All rights reserved.</p>
    </footer>
  </div>

  <!-- ===== JS ===== -->
  <script>
    /* ========= è½®æ’­ï¼ˆåŸæ€è·¯å¢å¼ºç‰ˆï¼‰ ========= */
    const slides = [
      { url:'./images/header/a01.png', title:'Bioinformatics', color:'rgba(36,31,33,.6)', alt:'Bioinformatics' },
      { url:'./images/header/a02.png', title:'Machine Learning', color:'rgba(43,35,26,.6)', alt:'Machine Learning' },
      { url:'./images/header/a03.png', title:'Deep Learning & Artificial Intelligence', color:'rgba(36,31,33,.6)', alt:'Deep Learning & AI' },
      { url:'./images/header/a04.png', title:'Phylogenetic Analysis', color:'rgba(43,35,26,.6)', alt:'Phylogenetic Analysis' },
      { url:'./images/header/a05.png', title:'Machine Unlearning', color:'rgba(36,31,33,.6)', alt:'Machine Unlearning' },
      { url:'./images/header/a06.png', title:'Cancer Bioinformatics', color:'rgba(43,35,26,.6)', alt:'Cancer Bioinformatics' },
    ];
    const sliderEl = document.querySelector('.slider');
    const imgEl = document.querySelector('.slider-wrapper img');
    const titleEl = document.getElementById('sliderTitle');
    const footerEl = document.getElementById('sliderFooter');
    const nextBtn = document.querySelector('.next');
    const prevBtn = document.querySelector('.prev');
    const dots = Array.from(document.querySelectorAll('.slider-indicator li'));
    let idx=0, autoplayId=null; const AUTOPLAY=3000;
    function show(i){ idx=(i+slides.length)%slides.length; const s=slides[idx];
      imgEl.src=s.url; imgEl.alt='Slide: '+(s.alt||s.title); titleEl.textContent=s.title; footerEl.style.backgroundColor=s.color;
      document.querySelector('.slider-indicator li.active')?.classList.remove('active'); dots[idx]?.classList.add('active');
      dots.forEach((d,k)=>d.setAttribute('aria-selected',k===idx?'true':'false'));
    }
    function next(){ show(idx+1); } function prev(){ show(idx-1); }
    function start(){ stop(); autoplayId=setInterval(next,AUTOPLAY); }
    function stop(){ if(autoplayId){ clearInterval(autoplayId); autoplayId=null; } }
    function interacted(){ stop(); start(); }
    nextBtn.addEventListener('click', ()=>{ next(); interacted(); });
    prevBtn.addEventListener('click', ()=>{ prev(); interacted(); });
    dots.forEach((d,i)=>{ d.addEventListener('click', ()=>{ show(i); interacted(); }); d.addEventListener('keydown',e=>{ if(['Enter',' '].includes(e.key)){ e.preventDefault(); show(i); interacted(); } })});
    sliderEl.addEventListener('mouseenter', stop); sliderEl.addEventListener('mouseleave', start);
    let sx=0; sliderEl.addEventListener('touchstart',e=>{ sx=e.changedTouches[0].clientX; },{passive:true});
    sliderEl.addEventListener('touchend',e=>{ const dx=e.changedTouches[0].clientX-sx; if(Math.abs(dx)>40){ dx<0?next():prev(); interacted(); } },{passive:true});
    document.addEventListener('visibilitychange',()=>{ document.hidden?stop():start(); });
    show(0); start();

    /* ========= è·¯ç”±åˆ‡æ¢ ========= */
    const navLinks=document.querySelectorAll('.navbar a');
    const sections=document.querySelectorAll('.content-section');
    const mobileSelect=document.getElementById('mobileNav');
    function switchTo(id){
      const cur=document.querySelector('.content-section.show');
      const tar=document.getElementById(id);
      if(!tar||cur===tar) return;
      cur?.classList.remove('fade-in'); cur?.classList.add('fade-out');
      setTimeout(()=>{ cur?.classList.remove('fade-out','show'); tar.classList.add('show'); setTimeout(()=>tar.classList.add('fade-in'),16); },180);
      document.querySelector('.navbar a.active')?.classList.remove('active');
      document.querySelector(`.navbar a[href="#${id}"]`)?.classList.add('active');
      if(mobileSelect && mobileSelect.value!==`#${id}`) mobileSelect.value=`#${id}`;
    }
    navLinks.forEach(a=>a.addEventListener('click',e=>{ e.preventDefault(); const id=a.getAttribute('href').slice(1); history.pushState({section:id},'',`#${id}`); switchTo(id); }));
    mobileSelect.addEventListener('change',function(){ if(!this.value) return; const id=this.value.slice(1); history.pushState({section:id},'',`#${id}`); switchTo(id); });
    function initByHash(){ const h=location.hash.slice(1)||'homeContainer';
      sections.forEach(s=>s.classList.remove('show','fade-in','fade-out'));
      document.querySelectorAll('.navbar a').forEach(a=>a.classList.remove('active'));
      document.querySelector(`.navbar a[href="#${h}"]`)?.classList.add('active');
      document.getElementById(h)?.classList.add('show','fade-in');
      if(mobileSelect) mobileSelect.value=`#${h}`;
    }
    window.addEventListener('load', initByHash);
    window.addEventListener('popstate', ()=>{ const h=location.hash.slice(1)||'homeContainer'; switchTo(h); });

    /* ========= ä½¿ç”¨æ‰‹å†Œï¼šç›®å½•è‡ªåŠ¨ç”Ÿæˆ / æ»šåŠ¨é«˜äº® / å¤åˆ¶æŒ‰é’® / Tabs ========= */
    (function manualEnhance(){
      const body = document.getElementById('manualBody');
      if(!body) return;

      // 1) ä¸º h2/h3 è‡ªåŠ¨ç”Ÿæˆ id
      const headings = body.querySelectorAll('h2, h3');
      const slugMap = new Map();
      function slugify(text){
        const base = text.trim().toLowerCase().replace(/[^\u4e00-\u9fa5\w\s\-]+/g,'').replace(/\s+/g,'-');
        if(!slugMap.has(base)) { slugMap.set(base, 0); return base; }
        const n = slugMap.get(base)+1; slugMap.set(base,n); return `${base}-${n}`;
      }
      headings.forEach(h=>{
        if(!h.id){ h.id = slugify(h.textContent || 'section'); }
      });

      // 2) æ„å»º TOC
      const toc = document.getElementById('manualToc');
      const frag = document.createDocumentFragment();
      headings.forEach(h=>{
        if(!(h.tagName==='H2' || h.tagName==='H3')) return;
        const a=document.createElement('a');
        a.href = `#${h.id}`;
        a.textContent = h.textContent;
        a.className = h.tagName==='H2' ? 'toc-l2' : 'toc-l3';
        a.addEventListener('click', (e)=>{ e.preventDefault(); document.getElementById(h.id)?.scrollIntoView({behavior:'smooth', block:'start'}); history.pushState(null,'',`#${h.id}`); });
        frag.appendChild(a);
      });
      toc.innerHTML = ''; toc.appendChild(frag);

      // 3) æ»šåŠ¨é«˜äº®ï¼ˆscroll spyï¼‰
      const tocLinks = Array.from(toc.querySelectorAll('a'));
      const observer = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          const id = entry.target.id;
          const link = tocLinks.find(a=>a.getAttribute('href')===`#${id}`);
          if(!link) return;
          if(entry.isIntersecting){
            tocLinks.forEach(n=>n.classList.remove('active'));
            link.classList.add('active');
          }
        });
      }, { rootMargin: '0px 0px -70% 0px', threshold: 0.1 });
      headings.forEach(h => observer.observe(h));

      // 4) ä»£ç å—å¤åˆ¶æŒ‰é’®
      body.querySelectorAll('pre .copy-btn[data-copy]').forEach(btn=>{
        btn.addEventListener('click', async ()=>{
          const pre = btn.closest('pre'); const code = pre?.querySelector('code')?.innerText || '';
          try{
            await navigator.clipboard.writeText(code);
            const old = btn.textContent; btn.textContent='å·²å¤åˆ¶ âœ”ï¸'; setTimeout(()=>btn.textContent=old,1200);
          }catch(err){ btn.textContent='å¤±è´¥ â—'; setTimeout(()=>btn.textContent='å¤åˆ¶',1200); }
        });
      });

      // 5) å¹³å° Tab åˆ‡æ¢
      function handleTabs(root){
        const tabBtns = root.querySelectorAll('.tab-btn');
        const panels = root.parentElement.querySelectorAll('.tab-panel');
        tabBtns.forEach(btn=>{
          btn.addEventListener('click', ()=>{
            const target = btn.dataset.tab;
            tabBtns.forEach(b=>b.setAttribute('aria-selected', String(b===btn)));
            panels.forEach(p=>p.classList.toggle('active', p.dataset.panel===target));
          });
        });
      }
      document.querySelectorAll('.tabs').forEach(handleTabs);

      // 6) è‹¥ URL å«æœ‰æ‰‹å†Œå†…çš„é”šç‚¹ï¼Œè¿›å…¥åå¹³æ»‘æ»šåŠ¨å®šä½
      if(location.hash){
        const el = document.getElementById(location.hash.slice(1));
        el && setTimeout(()=>el.scrollIntoView({behavior:'smooth', block:'start'}), 200);
      }
    })();
  </script>
</body>
</html>
